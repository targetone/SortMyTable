/*!
 * SortMyTable - Biblioteca de ordenação de tabelas HTML
 * Desenvolvido por Target One
 * GitHub: https://github.com/targetone/SortMyTable
 */
class SortMyTable{constructor(e){if(!(e&&e instanceof HTMLTableElement))throw new Error("Invalid table element");this.table=e,this.headers=Array.from(this.table.querySelectorAll("th")),this.currentSorting={},this.headers.forEach(((e,t)=>{e.hasAttribute("data-sort-ignore")||e.addEventListener("click",(()=>this.sortColumn(t)))}))}sortColumn(e){const t=this.headers[e],r=t.hasAttribute("data-is-number"),s=t.hasAttribute("data-is-date"),n="ascending"===t.getAttribute("aria-sort")?"descending":"ascending";this.headers.forEach((e=>e.removeAttribute("aria-sort"))),t.setAttribute("aria-sort",n);const a=Array.from(this.table.tBodies[0].rows);a.sort(((t,a)=>this.compareCells(t.cells[e],a.cells[e],r,s,n))),a.forEach((e=>this.table.tBodies[0].appendChild(e))),this.currentSorting={index:e,order:n}}compareCells(e,t,r,s,n){if(!e||!t)return 0;const a=e.textContent.trim(),i=t.textContent.trim();if(r){const e=this.parseNumber(a),t=this.parseNumber(i);return"ascending"===n?e-t:t-e}if(s){const e=this.parseDate(a),t=this.parseDate(i);return"ascending"===n?e-t:t-e}return"ascending"===n?a.localeCompare(i):i.localeCompare(a)}parseNumber(e){let t=e.replace(/[^0-9.,-]+/g,"").trim();t.includes(",")&&t.includes(".")?t=t.replace(/,/g,""):t.includes(",")&&(t=t.replace(/\./g,"").replace(",","."));const r=parseFloat(t);return isNaN(r)?99999999999:r}parseDate(e){const t=[{regex:/^\d{4}-\d{2}-\d{2}$/,parse:e=>{const[t,r,s]=e.split("-");return new Date(t,r-1,s)}},{regex:/^\d{2}\/\d{2}\/\d{4}$/,parse:e=>{const[t,r,s]=e.split("/");return new Date(s,r-1,t)}},{regex:/^\d{2}-\d{2}-\d{4}$/,parse:e=>{const[t,r,s]=e.split("-");return new Date(s,r-1,t)}},{regex:/^\d{4}\/\d{2}\/\d{2}$/,parse:e=>{const[t,r,s]=e.split("/");return new Date(t,r-1,s)}},{regex:/^\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}:\d{2}$/,parse:e=>{const[t,r]=e.split(" "),[s,n,a]=t.split("/"),[i,d,o]=r.split(":");return new Date(a,n-1,s,i,d,o)}},{regex:/^\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}$/,parse:e=>{const[t,r]=e.split(" "),[s,n,a]=t.split("/"),[i,d]=r.split(":");return new Date(a,n-1,s,i,d,0)}},{regex:/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/,parse:e=>new Date(e)},{regex:/^\d{2} \w{3} \d{4}$/,parse:e=>new Date(e)}];for(let r of t)if(r.regex.test(e))return r.parse(e);const r=new Date(e);return isNaN(r.getTime())?null:r}getSortingConfiguration(){return this.currentSorting}applySortingConfiguration(e){if(e&&"number"==typeof e.index&&e.order){this.headers[e.index].setAttribute("aria-sort","ascending"===e.order?"descending":"ascending"),this.sortColumn(e.index)}}disableSorting(){this.headers.forEach((e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}))}}