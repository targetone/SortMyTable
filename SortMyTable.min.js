/*!
 * SortMyTable - Biblioteca de ordenação de tabelas HTML
 * Desenvolvido por Target One
 * GitHub: https://github.com/targetone/SortMyTable
 */
class SortMyTable{constructor(e){if(!e||!(e instanceof HTMLTableElement))throw Error("Invalid table element");this.table=e,this.headers=Array.from(this.table.querySelectorAll("th")),this.currentSorting={},this.headers.forEach((e,t)=>{e.hasAttribute("data-sort-ignore")||e.addEventListener("click",()=>this.sortColumn(t))})}sortColumn(e){let t=this.headers[e],r=t.hasAttribute("data-is-number"),s=t.hasAttribute("data-is-date"),i="ascending"===t.getAttribute("aria-sort")?"descending":"ascending",a=t.getAttribute("data-decimal-separator")||null;this.headers.forEach(e=>e.removeAttribute("aria-sort")),t.setAttribute("aria-sort",i);let n=Array.from(this.table.tBodies[0].rows);n.sort((t,n)=>this.compareCells(t.cells[e],n.cells[e],r,s,i,a)),n.forEach(e=>this.table.tBodies[0].appendChild(e)),this.currentSorting={index:e,order:i}}compareCells(e,t,r,s,i,a){if(!e||!t)return 0;let n=e.textContent.trim(),l=t.textContent.trim();if(r){let d=this.parseNumber(n,a),o=this.parseNumber(l,a);return"ascending"===i?d-o:o-d}if(!s)return"ascending"===i?n.localeCompare(l):l.localeCompare(n);{let p=this.parseDate(n),u=this.parseDate(l);return"ascending"===i?p-u:u-p}}parseNumber(e,t){let r=e.replace(/[^0-9.,-]+/g,"").trim();if(","===t||"."===t){let s=","===t?".":",";if(r.includes(s)){let i=RegExp("\\"+s,"g");r=r.replace(i,"")}let a=RegExp("\\"+t,"g");r=r.replace(a,".")}else r.includes(",")&&r.includes(".")?r=r.replace(/,/g,""):r.includes(",")&&(r=r.replace(/\./g,"").replace(",","."));let n=parseFloat(r);return isNaN(n)?99999999999:n}parseDate(e){for(let t of[{regex:/^\d{4}-\d{2}-\d{2}$/,parse(e){let[t,r,s]=e.split("-");return new Date(t,r-1,s)}},{regex:/^\d{2}\/\d{2}\/\d{4}$/,parse(e){let[t,r,s]=e.split("/");return new Date(s,r-1,t)}},{regex:/^\d{2}-\d{2}-\d{4}$/,parse(e){let[t,r,s]=e.split("-");return new Date(s,r-1,t)}},{regex:/^\d{4}\/\d{2}\/\d{2}$/,parse(e){let[t,r,s]=e.split("/");return new Date(t,r-1,s)}},{regex:/^\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}:\d{2}$/,parse(e){let[t,r]=e.split(" "),[s,i,a]=t.split("/"),[n,l,d]=r.split(":");return new Date(a,i-1,s,n,l,d)}},{regex:/^\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}$/,parse(e){let[t,r]=e.split(" "),[s,i,a]=t.split("/"),[n,l]=r.split(":");return new Date(a,i-1,s,n,l,0)}},{regex:/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/,parse:e=>new Date(e)},{regex:/^\d{2} \w{3} \d{4}$/,parse:e=>new Date(e)}])if(t.regex.test(e))return t.parse(e);let r=new Date(e);return isNaN(r.getTime())?null:r}getSortingConfiguration(){return this.currentSorting}applySortingConfiguration(e){if(e&&"number"==typeof e.index&&e.order){let t=this.headers[e.index];t.setAttribute("aria-sort","ascending"===e.order?"descending":"ascending"),this.sortColumn(e.index)}}disableSorting(){this.headers.forEach(e=>{let t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)})}}